<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Duck-type by js-fullstack</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Duck-type</h1>
      <h2 class="project-tagline">Provide a natural way to define and validate data structure in JavaScript</h2>
      <a href="https://github.com/js-fullstack/duck-type" class="btn">View on GitHub</a>
      <a href="https://github.com/js-fullstack/duck-type/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/js-fullstack/duck-type/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="duck-type" class="anchor" href="#duck-type" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>duck-type</h1>

<p>Duck type is a JavaScript library, which provide a <strong>natural way</strong> to define and validate your data structure in JavaScript. The purpose of this library is try to help you to build up 'Complicated But Robust JavaScript Program', especially when you have to teamwork with other peoples, or developing your code based on unstable API.</p>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h2>

<p>Currently, duck-type can only support version on NodeJS:</p>

<div class="highlight highlight-source-shell"><pre>   npm install duck-type</pre></div>

<p>and, use it in your code, like:</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-k">var</span> duck <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>../duck-type<span class="pl-pds">'</span></span>).<span class="pl-en">namespace</span>();</pre></div>

<h3>
<a id="validation" class="anchor" href="#validation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Validation:</h3>

<p>Let us get start with validation:</p>

<h4>
<a id="example-1" class="anchor" href="#example-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 1</h4>

<p>Suppose we have to implement a function:</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-k">function</span> <span class="pl-en">foo</span>(<span class="pl-smi">param1</span>) {
    <span class="pl-k">...</span>
  }</pre></div>

<p>and we want to make sure that 'param1' should be a String, we can verify the type of 'param1' like this:</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-k">function</span> <span class="pl-en">foo</span>(<span class="pl-smi">param1</span>) {
    <span class="pl-en">duck</span>(param1).<span class="pl-en">is</span>(<span class="pl-c1">String</span>);
    <span class="pl-k">...</span>
  }</pre></div>

<p>We also can verify many parameters at once, like:</p>

<div class="highlight highlight-source-js"><pre>    <span class="pl-en">duck</span>(param1, param2).<span class="pl-en">are</span>(<span class="pl-c1">String</span>, <span class="pl-c1">Number</span>);   </pre></div>

<h4>
<a id="example-2" class="anchor" href="#example-2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 2</h4>

<p>How about complex object like:</p>

<div class="highlight highlight-source-js"><pre>  {
    name<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>, 
    age<span class="pl-k">:</span> <span class="pl-c1">12345</span>
  };</pre></div>

<p>We can verify it like:</p>

<pre><code>  duck(param1).is({
    name:String, 
    age:Number
  });
</code></pre>

<p>Note, the following object can also be passed, which means, relative to definition, the properties can be 'more', but can not be 'less':</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-en">duck</span>({             <span class="pl-c">//also can be passed, means the object is compatible with  the type</span>
    name<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>, 
    age<span class="pl-k">:</span> <span class="pl-c1">12345</span>, 
    something<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>}
  ).<span class="pl-en">is</span>({
    name<span class="pl-k">:</span><span class="pl-c1">String</span>, 
    age<span class="pl-k">:</span><span class="pl-c1">Number</span>
  }); </pre></div>

<h4>
<a id="example-3" class="anchor" href="#example-3" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 3</h4>

<p>We can verify the more complicated object like this:</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-en">duck</span>(param1).<span class="pl-en">is</span>({
    name <span class="pl-k">:</span> {
      first<span class="pl-k">:</span><span class="pl-c1">String</span>, 
      last<span class="pl-k">:</span><span class="pl-c1">String</span>
    },
    age<span class="pl-k">:</span> <span class="pl-c1">Number</span>,
    sayHello<span class="pl-k">:</span> <span class="pl-c1">Function</span>
    });</pre></div>

<p>Here :</p>

<p>'sayHello': Function means target object which to verified must have a method named 'sayHello'.</p>

<p>'name', is a nest object.</p>

<h4>
<a id="example-4" class="anchor" href="#example-4" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 4</h4>

<p>For array, duck-type can support different pattern:</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-en">duck</span>(x).<span class="pl-en">is</span>([]); <span class="pl-c">//means x must be a array, it eaual to is(Array)</span>

  <span class="pl-en">duck</span>(X).<span class="pl-en">is</span>([<span class="pl-c1">Number</span>]); <span class="pl-c">//means x must be a array, and each element of the array must be a Number</span>

  <span class="pl-en">duck</span>(X).<span class="pl-en">is</span>([<span class="pl-c1">Number</span>,<span class="pl-c1">String</span>,<span class="pl-c1">Date</span>]); 
  <span class="pl-c">//means x must be a array, and the first element  must be a Number, the second element must be a String....</span></pre></div>

<p>Of cause, we can combine definition of array and object, like;</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-en">duck</span>(param1).<span class="pl-en">is</span>({
    title<span class="pl-k">:</span> <span class="pl-c1">String</span>,
    description<span class="pl-k">:</span> <span class="pl-c1">String</span>,
      resourceDemands<span class="pl-k">:</span> [{
        resourceTypeId<span class="pl-k">:</span> <span class="pl-c1">Number</span>,
        year<span class="pl-k">:</span> <span class="pl-c1">Number</span>,
        month<span class="pl-k">:</span> <span class="pl-c1">Number</span>,
        quantity<span class="pl-k">:</span> <span class="pl-c1">Number</span>
    }]
  })</pre></div>

<h3>
<a id="define-our-data-structure-so-called-duck-type" class="anchor" href="#define-our-data-structure-so-called-duck-type" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Define our data structure, so-called duck type:</h3>

<p>Don't stop with verify. Declare the data structure and re-use them might be a better choice.</p>

<h4>
<a id="example-5" class="anchor" href="#example-5" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 5</h4>

<p>How to define type? Just do it like:</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-smi">duck</span>.<span class="pl-c1">type</span>(<span class="pl-s"><span class="pl-pds">'</span>ResourceDemand<span class="pl-pds">'</span></span>,{  <span class="pl-c">//now, we defined a type ResourceDemand</span>
    resourceTypeId<span class="pl-k">:</span> <span class="pl-c1">Number</span>,
    year<span class="pl-k">:</span> <span class="pl-c1">Number</span>,
    month<span class="pl-k">:</span> <span class="pl-c1">Number</span>,
    quantity<span class="pl-k">:</span> <span class="pl-c1">Number</span>
  });</pre></div>

<p>And how to use it? It is easy.</p>

<div class="highlight highlight-source-js"><pre>    <span class="pl-en">duck</span>(param1).<span class="pl-en">is</span>(<span class="pl-smi">duck</span>.<span class="pl-smi">ResourceDemand</span>);</pre></div>

<h4>
<a id="example-6" class="anchor" href="#example-6" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 6</h4>

<p>We can define some basic type, even like java.lang.Integer</p>

<div class="highlight highlight-source-js"><pre>    <span class="pl-smi">duck</span>.<span class="pl-c1">type</span>(<span class="pl-s"><span class="pl-pds">'</span>Integer<span class="pl-pds">'</span></span>,<span class="pl-k">function</span>(<span class="pl-smi">value</span>){
        <span class="pl-k">return</span> <span class="pl-en">duck</span>(value).<span class="pl-en">is</span>(<span class="pl-c1">Number</span>) <span class="pl-k">&amp;&amp;</span> value <span class="pl-k">%</span> <span class="pl-c1">1</span> <span class="pl-k">===</span> <span class="pl-c1">0</span> <span class="pl-k">&amp;&amp;</span> value <span class="pl-k">&gt;=</span> <span class="pl-k">-</span><span class="pl-c1">2147483648</span> <span class="pl-k">&amp;&amp;</span> value <span class="pl-k">&lt;=</span> <span class="pl-c1">2147483647</span>;
    });</pre></div>

<p>Here, by define the validate function we can decided what is 'Integer' in our program.</p>

<h4>
<a id="example-7" class="anchor" href="#example-7" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 7</h4>

<p>We can defined new type by leverage data structure which have already defined, I mean:</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-smi">duck</span>.<span class="pl-c1">type</span>(<span class="pl-s"><span class="pl-pds">'</span>Proposal<span class="pl-pds">'</span></span>,{
    id<span class="pl-k">:</span> <span class="pl-smi">duck</span>.<span class="pl-smi">Integer</span>
    title<span class="pl-k">:</span> <span class="pl-c1">String</span>,
    description<span class="pl-k">:</span> <span class="pl-c1">String</span>,
    resourceDemands<span class="pl-k">:</span> [<span class="pl-smi">duck</span>.<span class="pl-smi">ResourceDemand</span>]
}); </pre></div>

<h3>
<a id="other-interesting-features" class="anchor" href="#other-interesting-features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Other interesting features:</h3>

<h4>
<a id="example-8" class="anchor" href="#example-8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 8</h4>

<h5>
<a id="mock-data" class="anchor" href="#mock-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mock data.</h5>

<p>Type define first is encouraged, it is practice of 'Convention First'. And if your have defined a type already. 'mock' is another benefit provided by duck-type.</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-smi">duck</span>.<span class="pl-en">mock</span>(<span class="pl-smi">duck</span>.<span class="pl-smi">Proposal</span>);  <span class="pl-c">//it will return an object, which must compatible with type Proposal.</span></pre></div>

<p>I mean, </p>

<div class="highlight highlight-source-js"><pre>  {
    id<span class="pl-k">:</span> <span class="pl-c1">112</span>,
    title<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>sdfasf adsf<span class="pl-pds">'</span></span>,
    description<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>sdfsdf sdf 234s sd<span class="pl-pds">'</span></span>,
    resourceDemands<span class="pl-k">:</span> [{
      resourceTypeId<span class="pl-k">:</span> <span class="pl-c1">123</span>,
      year<span class="pl-k">:</span> <span class="pl-c1">2343</span>,
      month<span class="pl-k">:</span> <span class="pl-c1">234</span>,
      quantity<span class="pl-k">:</span> <span class="pl-c1">444</span>
    }]
  }</pre></div>

<p>The object like above might be return, of cause, most of value will be changed randomly.</p>

<h4>
<a id="example-9" class="anchor" href="#example-9" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 9</h4>

<h5>
<a id="optional-property" class="anchor" href="#optional-property" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Optional property</h5>

<p>The type can define optional property for an object by using function duck.optional.</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-smi">duck</span>.<span class="pl-c1">type</span>(<span class="pl-s"><span class="pl-pds">'</span>Profile<span class="pl-pds">'</span></span>, {
    name<span class="pl-k">:</span> <span class="pl-c1">String</span>,
    skill<span class="pl-k">:</span> <span class="pl-smi">duck</span>.<span class="pl-en">optional</span>([<span class="pl-c1">String</span>])
  });</pre></div>

<p>Here, 'name' is mandatory property and the value of it must be a String, 'skill' is a <strong>optional property</strong>, it can be undefined, BUT, if it has value, the value must be a array and which elements must be a String.</p>

<h4>
<a id="example-10" class="anchor" href="#example-10" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 10</h4>

<h5>
<a id="operator-and-or" class="anchor" href="#operator-and-or" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Operator: And, Or</h5>

<p>Dynamic data type of arguments is common in JavaScript. which means we need operator 'Or',</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-smi">Duck</span>.<span class="pl-c1">type</span>(<span class="pl-s"><span class="pl-pds">'</span>Config<span class="pl-pds">'</span></span>,{   <span class="pl-c">//here is definition of type 'Config'</span>
    id<span class="pl-k">:</span> <span class="pl-c1">Number</span>,
    layout<span class="pl-k">:</span> [<span class="pl-c1">String</span>]
  });
  <span class="pl-en">Duck</span>(x).<span class="pl-en">is</span>(<span class="pl-smi">duck</span>.<span class="pl-en">or</span>(<span class="pl-c1">String</span>, <span class="pl-smi">duck</span>.<span class="pl-smi">Config</span>));</pre></div>

<p>Here, the value of parameter 'x' can be a String, or can be a complex config object.</p>

<h4>
<a id="example-11" class="anchor" href="#example-11" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example 11</h4>

<h5>
<a id="implement-interfaces" class="anchor" href="#implement-interfaces" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Implement Interfaces</h5>

<p>In Java world, we often need make sure a Object must implement Interface A, Interface B... Similarly, operator 'And' can used for this purpose in JavaScript.</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-smi">Duck</span>.<span class="pl-c1">type</span>(<span class="pl-s"><span class="pl-pds">'</span>Config<span class="pl-pds">'</span></span>,{ <span class="pl-c">//here is definition of type 'Config'</span>
    orderBy<span class="pl-k">:</span>[<span class="pl-c1">String</span>]
    layout<span class="pl-k">:</span> [<span class="pl-c1">String</span>]
  });

 <span class="pl-smi">Duck</span>.<span class="pl-c1">type</span>(<span class="pl-s"><span class="pl-pds">'</span>Query<span class="pl-pds">'</span></span>,{ <span class="pl-c">//here is definition of type 'Query'</span>
    table<span class="pl-k">:</span> <span class="pl-c1">String</span>,
    id<span class="pl-k">:</span> <span class="pl-c1">Number</span>
  });

 <span class="pl-en">Duck</span>(x).<span class="pl-en">is</span>(<span class="pl-smi">duck</span>.<span class="pl-en">and</span>(<span class="pl-smi">duck</span>.<span class="pl-smi">Config</span>, <span class="pl-smi">duck</span>.<span class="pl-smi">Query</span>)); </pre></div>

<p>Here, we want to make sure the value of 'x' must implement type 'Config', and type 'Query', that means in duck typing world, x can used as a 'Config' object, and also can be used as 'Query' object at same time. </p>

<h3>
<a id="end" class="anchor" href="#end" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>End</h3>

<p>The library duck-type is still developing continually, more interesting feature will be bring to you. We also except any of your comments. </p>

<p>Thanks :) </p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/js-fullstack/duck-type">Duck-type</a> is maintained by <a href="https://github.com/js-fullstack">js-fullstack</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("duck-type-000000-01");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
