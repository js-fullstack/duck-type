!function(){function n(t){return this instanceof n?(this.values=t,void(t.length>0&&(this.value=t[0]))):new n(Array.prototype.slice.call(arguments))}function t(n,t){return void 0!==n&&new Object(n)instanceof t}function e(n){return"function"==typeof n&&n.name}function r(n){return/^[A-Z]\w*$/.test(n)}function o(n,t){return Object.keys(t).reduce(function(n,e){return n[e]=t[e],n},n)}function u(n){var t,e=E;if("function"==typeof n){t=n,E=i;try{return t()}catch(r){throw r}finally{E=e}}else"boolean"==typeof n&&(E=n?i:_)}function i(n){return n}function c(t){return u(function(){return void 0===t?"undefined":null===t?"null":n(t).is(l(Number,Date,Boolean,RegExp))?t.toString():n(t).is(String)?'"'+t+'"':n(t).is(Function)?"Function":n(t).is(Array)?"["+t.map(function(n){return c(n)}).join(",")+"]":n(t).is(Object)?"{ "+Object.keys(t).reduce(function(n,e){return n.concat([e,c(t[e])].join(": "))},[]).join(", ")+" }":void 0})}function a(n){return n.__duck_type_name__?n.__duck_type_name__:e(n)?n.name:""}function f(t){return u(function(){return n(t).is(Function)?t.__duck_type_error__?t.__duck_type_error__():t.name||t.toString():n(t).is(Array)?"["+t.map(function(n){return f(n)}).join(",")+"]":n(t).is(Object)?"{ "+Object.keys(t).reduce(function(n,e){return n.concat([e,f(t[e])].join(": "))},[]).join(", ")+" }":void 0})}function _(n,t,r,o){if(n===!1){var u=[o.need()?[o.chain.join(".").replace(/\.\[/g,"["),c(o.lastValue)].join(": "):c(t),"is not compatible with",function(n){return a(n)||f(n)}(o.need()?o.lastType:r)];throw e(r)||(u=u.concat([",","which defined by",a(r)||"inline validator",":",f(r,!1,!0)])),new j(u.join(" "))}return!0}function p(n,t,e){return n.__duck_type_mocker__=t,n.__duck_type_error__=e,n}function y(n){var t=function(t){return n.isPrototypeOf(t)};return t.__duck_type_mocker__=function(){return Object.create(n)},t.__duck_type_error__=function(){return"asPrototype("+c(n)+")"},t}function l(){var t=Array.prototype.slice.call(arguments),e=function(e){return t.some(function(t){return n(e).is(t)})};return e.__duck_type_mocker__=function(){return k(t[m(t.length)])},e.__duck_type_error__=function(){return"or("+t.map(function(n){return f(n,!1,!0)}).join(", ")+")"},e}function d(){var t=Array.prototype.slice.call(arguments),e=function(e,r){return t.every(function(t){return n(e).is(t,r)})};return e.__duck_type_mocker__=function(){return t.reduce(function(n,t){var e=k(t);return Object.keys(e).forEach(function(t){n[t]=e[t]}),n},{})},e.__duck_type_error__=function(){return"and("+t.map(function(n){return f(n)}).join(", ")+")"},e}function s(n){var t=l(n,O);return t.__duck_type_error__=function(){return"optional("+f(n)+")"},t}function v(n,t,e){var r=function(){var o=Array.prototype.slice.call(arguments),u=function(t){return n.apply(void 0,[t].concat(o))};return"function"==typeof t&&(u.__duck_type_mocker__=function(){return t.apply(void 0,o)}),"function"==typeof e?u.__duck_type_error__=function(){return e.apply(void 0,o)}:u.__duck_type_error__=function(){return r.__duck_type_name__+"("+o.map(function(n){return c(n)}).join(",")+")"},u};return r}function h(n){for(var t=[];n-- >0;)t.push(n);return t.reverse()}function m(n){return Math.floor(Math.random()*n)}function k(t){var r=u(function(){if(e(t))return D[t.name]?D[t.name]():new t;if("function"==typeof t){if("function"==typeof t.__duck_type_mocker__)return t.__duck_type_mocker__();throw new w("can not mock type "+t)}return n(t).is(Array)?0===t.length?[]:1===t.length?function(){return h(m(10)).reduce(function(n){return n.concat(k(t[0]))},[])}():h(t.length).reduce(function(n,e){return n.concat(k(t[e]))},[]):n(t).is(Object)?Object.keys(t).reduce(function(n,e){return n[e]=k(t[e]),n},{}):void 0});return r}function j(n){var t=Error.call(this,n);return t.name="IncompatibleTypeError",t}function b(n){var t=Error.call(this,n);return t.name="InvalidTypeError",t}function w(n){var t=Error.call(this,n);return t.name="InvalidMockHandlerError",t}function g(){var t=function(){return new n(Array.prototype.slice.call(arguments))};return t.assert=t,t.type=function(i,c){if(!r(i))throw Error(i+" is invalider type name");u(function(){e(c)?t[i]=c:n(c).is(l(Function,Array))?(c.__duck_type_name__=i,t[i]=c):t[i]=o(Object.create({__duck_type_name__:i}),c)})},t.bind=function(n){return Object.keys(t).filter(r).forEach(function(e){if(void 0!==n[e])throw Error("duplicate key found when binding  to object "+n+" , key:"+e);n[e]=t[e]}),n},function(){t.type("UNDEFINED",O),t.type("NULL",A)}(),t.mute=u,t.validator=p,t.asPrototype=y,t.or=l,t.and=d,t.optional=s,t.generate=k,t.parameterize=v,t.IncompatibleTypeError=j,t}n.prototype={is:function(r,o){if(o=o||{chain:[],lastValue:void 0,lastType:void 0,need:function(){return this.chain.length>0},wrap:function(n,t,e,r){var o,u=this;return u.chain.push(n),u.lastValue=e,u.lastType=t,o=r(),o&&u.chain.pop(),o}},["function","object"].indexOf(typeof r)<0)throw b("only function or object can be type define, now type is ("+typeof r+")");var i=this,c=u(function(){return e(r)?t(i.value,r):"function"==typeof r?r(i.value,o):n(r).is(Array)?n(i.value).is(Array)&&function(){return 0===r.length?!0:1===r.length?i.value.every(function(t,e){return o.wrap("["+e+"]",r[0],t,function(){return n(t).is(r[0],o)})}):r.every(function(t,e){return o.wrap("["+e+"]",t,i.value[e],function(){return n(i.value[e]).is(t,o)})})}():n(r).is(Object)?n(i.value).is(Object)&&Object.keys(r).every(function(t){return o.wrap(t,r[t],i.value[t],function(){return n(i.value[t]).is(r[t],o)})}):!1});return E(c,i.value,r,o)},are:function(){var t=this,e=Array.prototype.slice.call(arguments);return E(t.values.length===e.length&&e.every(function(e,r){return n(t.values[r]).is(e)}),t.values,e)}};var E=_,O=p(function(n){return void 0===n},function(){},function(){return"UNDEFINED"}),A=p(function(n){return null===n},function(){return null},function(){return"NULL"}),D={String:function(){var n="abcdefg hijklmn opqrst uvwxyz ABCDEFG HIGKLMN OPQRST UVWXYZ -_123456789 *";return h(m(100)).reduce(function(t,e){return t.concat(n[e])},[]).join("")},Number:function(){return 2e4*(Math.random()-.5)},Boolean:function(){return Math.random()>=.5},Date:function(){return new Date(m((new Date).getTime()))},Object:function(){var n=["String","Number","Boolean","Date","Function","RegExp"];return D[n[m(n.length)]]()},Function:function(){return function(){}},Array:function(){return h(m(10)).reduce(function(n){return n.concat(D.Object())},[])},RegExp:function(){return/.*/}};j.prototype=Error.prototype,b.prototype=Error.prototype,w.prototype=Error.prototype,"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports={create:g}),"undefined"!=typeof exports&&(exports.create=g),"undefined"!=typeof define&&define.amd&&define([],function(){return{create:g}}),"undefined"!=typeof window&&(window.duckType={create:g})}();
